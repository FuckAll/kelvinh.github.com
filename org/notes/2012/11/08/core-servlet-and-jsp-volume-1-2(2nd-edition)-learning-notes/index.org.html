<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.40 in css mode. -->
<html>
  <head>
    <title>index.org</title>
    <style type="text/css">
    <!--
      body {
        color: #839496;
        background-color: #002b36;
      }
      .comment {
        /* font-lock-comment-face */
        color: #586e75;
        font-style: italic;
      }
      .italic {
        /* italic */
        text-decoration: underline;
      }
      .org-block {
        /* org-block */
        color: #586e75;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #586e75;
        font-style: italic;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #586e75;
        font-style: italic;
      }
      .org-code {
        /* org-code */
        color: #586e75;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #586e75;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-size: 144%;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #268bd2;
      }
      .org-link {
        /* org-link */
        color: #6c71c4;
        text-decoration: underline;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #586e75;
        font-style: italic;
      }
      .whitespace-line {
        /* whitespace-line */
        color: #ee82ee;
        background-color: #333333;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="org-document-info-keyword">#+TITLE:</span><span class="comment">       </span><span class="org-document-title">Core Servlet and JSP Volume 1/2(2nd Edition) Learning Notes</span>
<span class="org-document-info-keyword">#+AUTHOR:</span><span class="comment">      </span><span class="org-document-info">Kelvin Hu</span>
<span class="org-document-info-keyword">#+EMAIL:</span><span class="comment">       </span><span class="org-document-info">ini.kelvin@gmail.com</span>
<span class="org-document-info-keyword">#+DATE:</span><span class="comment">        </span><span class="org-document-info">2012-11-08 Thu</span>
<span class="org-meta-line">#+KEYWORDS:    java, servlet, jsp</span>
<span class="org-meta-line">#+CATEGORY:    notes</span>
<span class="org-meta-line">#+TAGS:        :J2EE:HTTP:</span>
<span class="org-meta-line">#+LANGUAGE:    en</span>
<span class="org-meta-line">#+OPTIONS:     H:3 num:nil toc:nil \n:nil @:t ::t |:t ^:nil -:t f:t *:t &lt;:t</span>
<span class="org-meta-line">#+DESCRIPTION: learning notes of book Core Servlet and JSP Volume 1/2(2nd Editio</span><span class="whitespace-line">n)</span>

This file recorded notes during learning <span class="italic">/Core Servlet and JSP/</span>.

<span class="org-level-1">* A sample </span><span class="org-level-1"><span class="org-code">=web.xml=</span></span><span class="org-level-1">:</span>

<span class="org-block-begin-line">  #+begin_src xml
</span><span class="org-block">  &lt;?xml version="1.0" encoding="utf-8"?&gt;

  &lt;web-app xmlns="http://java.sun.com/xml/ns/j2ee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation=
           "http://java.sun.com/xml/ns/j2ee
            http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;

    &lt;display-name&gt;Servlet Testing&lt;/display-name&gt;
    &lt;description&gt;
      This web application demonstrates the usage of Servlet/JSP (mainly Servlet</span><span class="whitespace-line">).</span><span class="org-block">
      The contents are composed while reading Core Servlet and JSP Volume 2.
    &lt;/description&gt;

    &lt;!-- the following definition seems no effect... --&gt;
    &lt;icon&gt;
      &lt;small-icon&gt;/small.png&lt;/small-icon&gt;
      &lt;large-icon&gt;/large.gif&lt;/large-icon&gt;
    &lt;/icon&gt;

    &lt;!-- the following definition seems no effect... --&gt;
    &lt;mime-mapping&gt;
      &lt;extension&gt;png&lt;/extension&gt;
      &lt;mime-type&gt;text/plain&lt;/mime-type&gt;
    &lt;/mime-mapping&gt;

    &lt;context-param&gt;
      &lt;param-name&gt;host&lt;/param-name&gt;
      &lt;param-value&gt;nj-kelvin-hu&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;error-page&gt;
      &lt;error-code&gt;404&lt;/error-code&gt;
      &lt;location&gt;/404.jsp&lt;/location&gt;
    &lt;/error-page&gt;

    &lt;error-page&gt;
      &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;
      &lt;location&gt;/exception.jsp&lt;/location&gt;
    &lt;/error-page&gt;

    &lt;listener&gt;
      &lt;listener-class&gt;ini.kelvin.servlet.ContextListener&lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;listener&gt;
      &lt;listener-class&gt;ini.kelvin.servlet.SessionListener&lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;filter&gt;
      &lt;filter-name&gt;print&lt;/filter-name&gt;
      &lt;filter-class&gt;ini.kelvin.servlet.PrintFilter&lt;/filter-class&gt;
      &lt;init-param&gt;
        &lt;param-name&gt;admin&lt;/param-name&gt;
        &lt;param-value&gt;Kelvin Hu&lt;/param-value&gt;
      &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
      &lt;filter-name&gt;print&lt;/filter-name&gt;
      &lt;servlet-name&gt;Hello&lt;/servlet-name&gt;
    &lt;/filter-mapping&gt;
    &lt;filter-mapping&gt;
      &lt;filter-name&gt;print&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;servlet&gt;
      &lt;servlet-name&gt;Hello&lt;/servlet-name&gt;
      &lt;servlet-class&gt;ini.kelvin.servlet.HelloWorldServlet&lt;/servlet-class&gt;
      &lt;init-param&gt;
        &lt;param-name&gt;name&lt;/param-name&gt;
        &lt;param-value&gt;Kelvin Hu&lt;/param-value&gt;
      &lt;/init-param&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;Hello&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
      &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
      &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;

    &lt;session-config&gt;
      &lt;session-timeout&gt;1&lt;/session-timeout&gt;
    &lt;/session-config&gt;

  &lt;/web-app&gt;
</span><span class="org-block-end-line">  #+end_src
</span>
  The value of <span class="org-code">=url-pattern=</span> must start with <span class="org-code">=/=</span> or <span class="org-code">=*.=</span>.

  Matching Overlapping Patterns:

  1) Exact matches handled first: <span class="org-link">http://.../foo/bar</span> will be handled by
     <span class="org-code">=/foo/bar=</span>, not <span class="org-code">=/foo/*=</span>, also, <span class="org-code">=/foo/bar.html=</span> will win over
     <span class="org-code">=*.html=</span>, if the URL is <span class="org-link">http://.../foo/bar.html</span>.

  2) Directory mapping are preferred over extension mappings: the URL
     <span class="org-link">http://.../foo/bar.html</span> will be handled by <span class="org-code">=/foo/*=</span>, not the pattern
     <span class="org-code">=*.html=</span>.

  3) For overlapping directory mappings, the longest path is preferred:
     <span class="org-link">http://.../foo/bar/baz.html</span> will be handled by <span class="org-code">=/foo/bar/*=</span>, not
     <span class="org-code">=/foo/*=</span>.

  Parameters defined in <span class="org-code">=&lt;init-param&gt;=</span> could be read by the method
  <span class="org-code">=getInitParameter()=</span> of <span class="org-code">=ServletConfig=</span>.

  <span class="org-code">=&lt;load-on-startup&gt;=</span> tells server the sequence that the servlet should
  be loaded into memory, lower number goes first, if two servlets have
  the same number, the load sequence is decided by server. Negative number
  cannot guarantee the servlet loading at startup.

  When defining the <span class="org-code">=&lt;location&gt;=</span> of <span class="org-code">=&lt;error-page&gt;=</span>, be careful of the
  leading slash, so <span class="org-code">=&lt;location&gt;/404.jsp&lt;/location&gt;=</span> will work, but if
  the slash <span class="org-code">=/=</span> removed, <span class="org-code">=404.jsp=</span> will be not found.

<span class="org-level-1">* HTTP/1.1 common request headers</span>

  1) <span class="org-code">=Accept=</span>: specify the MIME types that the browser can handle

  2) <span class="org-code">=Accept-Charset=</span>: the character charset

  3) <span class="org-code">=Accept-Encoding=</span>: the encoding type, the most commonly used is
     "gzip, deflate"

  4) <span class="org-code">=Accept-Language=</span>: the language the browser excepted

  5) <span class="org-code">=Authorization=</span>: used to identify the browser when visiting some pages
     with password protection

  6) <span class="org-code">=Connection=</span>: to indicate if the browser can handle continuous HTTP
     connection, continuous connection can transfer several files(html,
     images, etc) in one socket, saved the cost of establishing multiple
     connections

  7) <span class="org-code">=Content-Length=</span>: only used for <span class="org-code">=POST=</span>, specify the length of <span class="org-code">=POST=</span>
     request

  8) <span class="org-code">=Cookie=</span>: return cookies back to http server, these cookies are formerly
     sent to browser by http server

  9) <span class="org-code">=Host=</span>: the host name and port number in the requested URL

  10) <span class="org-code">=If-Modified-Since=</span>: indicate the requested page is wanted only if the
      page has been modified after the specified date, otherwise the http
      server will send 304(Not Modified) instead, servlet should not handle
      this header directly, but implement <span class="org-code">=getLastModified()=</span> method, let
      the server to handle the date comparison

  11) <span class="org-code">=If-Unmodified-Since=</span>: the opposite one of <span class="org-code">=If-Modified-Since=</span>

  12) <span class="org-code">=Referer=</span>: the URL which referenced current page

  13) <span class="org-code">=User-Agent=</span>: to identify the client browser which sent the request

<span class="org-level-1">* HTTP/1.1 common response headers</span>

  1) <span class="org-code">=Allow=</span>: specify request methods the server supported

  2) <span class="org-code">=Cache-Control=</span>: tell client how to cache the document, can be set with
     the following values:
     - <span class="org-code">=public=</span>: the document can be cached
     - <span class="org-code">=private=</span>: the document can only be cached in private cache for single
       user
     - <span class="org-code">=no-cache=</span>: do not cache the document (old browsers use <span class="org-code">=Pragma=</span>, so
       this header should also be set to <span class="org-code">=no-cache=</span> for old browsers)
     - <span class="org-code">=no-store=</span>: do not cache, even do not store in temp folder on local disk
     - <span class="org-code">=must-revalidate=</span>: client must communicate with server to validate the
       document everytime when using it
     - <span class="org-code">=proxy-revalidate=</span>: similar to previous one, only adapted to shared cache
     - <span class="org-code">=max-age=XXX=</span>: the document will be invalid after <span class="italic">/XXX/</span> seconds, it is th<span class="whitespace-line">e</span>
       replacement of header <span class="org-code">=Expires=</span>, and it has higher priority when both of
       them exist
     - <span class="org-code">=s-max-age=XXX=</span>: the shared cache should make the document invalid after
       <span class="italic">/XXX/</span> seconds

  3) <span class="org-code">=Connection=</span>: used for continuouse connection, the value "close" tells the
     browser not to use continuous connection, default is continuous connection

  4) <span class="org-code">=Content-Disposition=</span>: make the browser to ask user to store the response
     with the specified name on disk, as below:
     <span class="org-code">=Content-Disposition: attachment; filename=some-file-name=</span>

  5) <span class="org-code">=Content-Encoding=</span>: the encoding used during response transmission

  6) <span class="org-code">=Content-Language=</span>: the language response used

  7) <span class="org-code">=Content-Length=</span>: the byte count of response, only used for continuous
     connection

  8) <span class="org-code">=Content-Type=</span>: the MIME of response, example:
     <span class="org-code">=Content-Type: text/html; charset=utf-8=</span>

  9) <span class="org-code">=Expires=</span>: see <span class="org-code">=Cache-Control=</span> and <span class="org-code">=Pragma=</span>

  10) <span class="org-code">=Last-Modified=</span>: the last modified time of the document

  11) <span class="org-code">=Location=</span>: required when status code is between 300 and 399, used to
      notify the browser where the document is stored, the browser will
      automatically connect to the new address and get the new document

  12) <span class="org-code">=Pragma=</span>: see <span class="org-code">=Cache-Control=</span> and <span class="org-code">=Expires=</span>

  13) <span class="org-code">=Refresh=</span>: tell browser to send request for the newest page after the
      interval, example use:
      <span class="org-code">=Refresh: 5; URL=</span><span class="org-link"><span class="org-code">http://host/path</span></span><span class="org-code">=</span>

  14) <span class="org-code">=Retry-After=</span>: used with status code 503, tell the client to retry after
      the interval

  15) <span class="org-code">=Set-Cookie=</span>: specify a cookie, every cookie needs a stand alone header

  16) <span class="org-code">=WWW-Authenticate=</span>: used with 401, tell browser the authentication type
      and domain needed in request header <span class="org-code">=Authorization=</span>
</pre>
  </body>
</html>
